/**
 *
 * Drawer 2.0.0
 *
 * A simple off canvas navigation built with JavaScript & CSS3. It's library agnostic, provides support for jQuery and AMD and it's simple to set up and use.
 *
 * Website: http://drawerjs.rolandjitsu.com/
 * Repository: https://github.com/rolandjitsu/drawerjs.git
 * Bugs: https://github.com/rolandjitsu/drawerjs/issues
 *
 * Copyright (c) 2013 Rolandjitsu
 * License MIT: https://github.com/rolandjitsu/drawerjs/blob/master/LICENSE.md
 *
 */


(function(a,b,c){var d="Drawer",e={content:"#drawer-content",offset:120,navigation:"#drawer-navigation",speed:250},f=function(){var d=0,e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};this.browser={},this.browser.prefixes="O ms Moz Webkit".split(" "),this.browser.vendors="o ms moz webkit ".split(" "),this.browser.AnimationFrame=function(){for(var b,c,d,e=this.browser.vendors.length-1;e>=0&&(b=this.browser.vendors[e],d=a[b+"CancelAnimationFrame"]||a[b+"CancelRequestAnimationFrame"],c=a[b+"RequestAnimationFrame"],!this.isFunction(c));)e--;return{cancel:d,request:c}}.call(this),this.browser.RequestAnimationFrame=this.isFunction(this.browser.AnimationFrame.request)?this.browser.AnimationFrame.request.bind(a):function(b,c){var e=Date.now(),f=Math.max(0,16-(e-d)),g=a.setTimeout(function(){b(e+f,c)},f);return d=e+f,g},this.browser.CancelAnimationFrame=this.isFunction(this.browser.AnimationFrame.cancel)?this.browser.AnimationFrame.cancel.bind(a):function(a){clearTimeout(a)},this.browser.supports={},this.browser.supports.pointers=a.navigator.msPointerEnabled,this.browser.supports.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch,this.browser.events=function(){for(var a,b,d={},e={touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp"},f=this.keys(e),g=f.length-1;g>=0;)b=f[g],a=e[b],d[b.replace("touch","pointer")]=this.browser.supports.touch?b:this.browser.supports.pointers?a:c,g--;return d}.call(this),this.browser.events.resize="onorientationchange"in a?"orientationchange":"resize",this.css={},this.css.properties={},this.css.properties.transition={},this.css.properties.transform={},this.css.properties.flexbox={},this.css.properties.flexbox.type={},this.css.properties.transition.property=this.prefixed("transition","opacity 2s ease"),this.css.properties.transition.end=e[this.css.properties.transition.property],this.css.properties.transform.js=this.prefixed("transform","scale(1)"),this.css.properties.transform.css=this.hyphen(this.css.properties.transform.js),this.css.properties.perspective=this.prefixed("perspective","1000"),this.css.properties.backface=this.prefixed("backfaceVisibility","hidden"),this.css.properties.touchAction=this.prefixed("touchAction","none"),this.css.properties.flexbox.type.edge=this.prefixed("flexBasis","1px"),this.css.properties.flexbox.type.legacy=this.prefixed("boxDirection","reverse"),this.css.properties.flexbox.type.hybrid=this.prefixed("flexAlign","end"),this.css.properties.flexbox.type.edge&&(this.css.properties.flexbox.display=this.hyphen(this.prefixed("flex","1"))),this.css.properties.flexbox.type.hybrid&&(this.css.properties.flexbox.display="-ms-flexbox"),this.css.properties.flexbox.type.legacy&&this.isUndefined(this.css.properties.flexbox.type.edge)&&(this.css.properties.flexbox.display=this.hyphen(this.prefixed("boxDirection","reverse")).replace("-direction","")),this.css.properties.flexbox.length=this.css.properties.flexbox.type.edge?this.prefixed("flex","1"):this.prefixed("boxFlex","1"),this.css.translate=this.isUndefined(this.css.properties.perspective)?this.translate2d.bind(this):this.translate3d.bind(this),this.css.animate=this.isUndefined(this.css.properties.transition.property)?this.animate.bind(this):this.transition.bind(this)};f.prototype={animate:function(a,b,c){var d,e,f,g=Array.prototype.slice.call(arguments,3),h=g.length-1,i=this.bounds(a).left,j=b-i,k=Date.now(),l=function(m){if(f=m-k,f>=c)for(this.css.translate(a,b),this.browser.CancelAnimationFrame(e);h>=0;)d=g[h],"function"==typeof d&&d.call(),h--;else this.css.translate(a,i+f/c*j),e=this.browser.RequestAnimationFrame(l)}.bind(this);this.browser.RequestAnimationFrame(l)},bounds:function(a){return this.isElement(a)?a.getBoundingClientRect():{}},defaults:function(a){for(var b,c,d,e,f=Array.prototype.slice.call(this.isArguments(arguments)?arguments:[],1),g=f.length-1;g>=0;){for(b=f[g],c=this.keys(this.isObject(b)?b:{}),d=c.length-1;d>=0;)e=c[d],this.isUndefined(a[e])&&(a[e]=b[e]),d--;g--}return a||{}},hyphen:function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")},is:function(a,b){return typeof a===b},isArguments:function(a){return this.isObject(a)&&Object.prototype.hasOwnProperty.call(a,"callee")},isArray:Array.isArray,isElement:function(a){return this.isFunction(HTMLElement)?a instanceof HTMLElement:this.isObject(a)?1===a.nodeType:!1},isEmpty:function(a){return 0===this.size(a)},isFunction:function(a){return this.is(a,"function")},isNull:function(a){return null===a},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isObject:function(a){return null!==a&&this.is(a,"object")&&!this.is(a,"function")},isString:function(a){return this.is(a,"string")||a instanceof String},isUndefined:function(a){return void 0===a},keys:Object.keys,offload:function(a){setTimeout(a||function(){},0)},prefixed:function(a,b){if(this.supports(a,b))return a;var d,e=this.browser.prefixes.length-1;for(a=a.charAt(0).toUpperCase()+a.slice(1);e>=0;){if(d=this.browser.prefixes[e]+a,this.supports(d,b))return d;e--}return c},size:function(a){return this.isNull(a)||this.isUndefined(a)?0:this.isArray(a)||this.isString(a)?a.length:this.keys(a).length},supports:function(c,d){return"CSS"in a&&"supports"in a.CSS?CSS.supports(this.hyphen(c),d):!this.isUndefined(b.createElement("drawer").style[c])},transition:function(a,b,c){var d,e=Array.prototype.slice.call(arguments,3),f=e.length-1,g=this.css.properties.transition,h=function(b){if(b.target===a){for(;f>=0;)d=e[f],"function"==typeof d&&d.call(),f--;a.style[g.property]="",a.removeEventListener(g.end,h)}};a.addEventListener(g.end,h,!1),a.style[g.property]=this.css.properties.transform.css+" "+c+"ms",this.css.translate(a,b)},translate2d:function(a,b){a.style[this.css.properties.transform.js]="translate("+b+"px, 0)"},translate3d:function(a,b){a.style[this.css.properties.transform.js]="translate("+b+"px, 0)"+"translateZ(0)"}};var g=function(){};g.prototype={handleEvent:function(a){return a.type===this.utils.browser.events.pointerstart?this.start(a):a.type===this.utils.browser.events.pointermove?this.move(a):a.type===this.utils.browser.events.pointerend?this.utils.offload(this.end()):a.type===this.utils.browser.events.resize?this.utils.offload(this.reset()):void 0},start:function(a){this.content.addEventListener(this.utils.browser.events.pointermove,this,!1),this.content.addEventListener(this.utils.browser.events.pointerend,this,!1),this.index&&a.preventDefault();var b=this.utils.browser.supports.touch?a.touches[0]:{pageX:a.pageX,pageY:a.pageY};this.started.x=b.pageX,this.started.y=b.pageY,this.started.time=Date.now(),this.delta={},this.scrolling=c},move:function(a){if(a.preventDefault(),!(this.utils.browser.supports.pointers&&!a.isPrimary||this.utils.browser.supports.touch&&(a.touches.length>1||a.scale&&1!==a.scale))){var b=this.utils.browser.supports.touch?a.touches[0]:{pageX:a.pageX,pageY:a.pageY};this.delta.x=b.pageX-this.started.x,this.delta.y=b.pageY-this.started.y,this.utils.isUndefined(this.scrolling)&&(this.scrolling=Math.abs(this.delta.x)<Math.abs(this.delta.y)),this.scrolling||this.delta.x<0&&!this.index||this.delta.x>0&&this.index||this.utils.css.translate(this.content,this.index?this.width-Math.abs(this.delta.x)-this.options.offset:this.delta.x)}},end:function(){this.content.removeEventListener(this.utils.browser.events.pointermove,this,!1),this.content.removeEventListener(this.utils.browser.events.pointerend,this,!1);var a=Math.abs(this.delta.x);if(this.index||this.utils.isNumber(a)){var b=this.delta.x<0,c=this.width/2,d=Date.now()-this.started.time<250&&a>20||a>c,e=this.utils.bounds(this.content).left>c;this.slide(d&&!b&&(!e||!this.index)||!d&&(this.utils.isNumber(a)||b)&&e?1:0)}},slide:function(a){var b=a?"onOpen":"onClose",c=this.options[b];this.utils.isFunction(c)&&c.call(),this.utils.css.animate(this.content,a?this.width-this.options.offset:0,this.options.speed,a?this.options.onOpened:this.options.onClosed,this.options.transitioned),this.index=a},reset:function(){this.width=a.document.documentElement.clientWidth,this.navigation.style.width=this.width+"px",this.index&&this.slide(0)}};var h=function(d,f){if(this.options=this.utils.defaults(this.utils.isUndefined(f)?{}:f,e),this.element=this.utils.isElement(d)?d:b.body,this.content=this.utils.isElement(this.options.content)?this.options.content:b.getElementById(/^(?:#([\w-]+))$/.exec(this.options.content)[1]),this.navigation=this.utils.isElement(this.options.navigation)?this.options.navigation:b.getElementById(/^(?:#([\w-]+))$/.exec(this.options.navigation)[1]),this.utils.isElement(this.element)&&this.utils.isElement(this.content)&&this.utils.isElement(this.navigation)){this.index=0,this.width=a.document.documentElement.clientWidth,this.delta={},this.started={},this.scrolling=c,this.element.style.display=this.utils.css.properties.flexbox.display||"block",this.element.style.overflowX="hidden",this.element.style[this.utils.css.properties.backface]="hidden",this.element.style[this.utils.css.properties.perspective]="1000",this.content.style[this.utils.css.properties.flexbox.length]="1",this.content.style[this.utils.css.properties.touchAction]="none",this.content.style.zIndex=Math.floor(1016*Math.random()+10),this.navigation.style.position="absolute",this.navigation.style.width=this.width+"px",a.addEventListener(this.utils.browser.events.resize,this,!1),this.utils.browser.events.pointerstart&&this.content.addEventListener(this.utils.browser.events.pointerstart,this,!1);var g=this.slide.bind(this);return{close:function(){return g(0)},open:function(){return g(1)}}}};h.prototype=Object.create(g.prototype,{utils:{enumerable:!0,value:new f}}),h.prototype.constructor=h,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a[d]=h,define(function(){return h})):a[d]=h}).apply(this,[this,this.document]),function(a){var b=a.fn.drawer;a.fn.drawer=function(b){return this.each(function(){var c=a(this),d=c.data("drawer"),e=a.extend({},a.fn.drawer.defaults,c.data(),null!==b&&"object"==typeof b&&"function"!=typeof b?b:{});d||(d=new Drawer(this,e),c.data("drawer",d)),"string"==typeof b&&d[b]()})},a.fn.drawer.defaults={},a.fn.drawer.Constructor=Drawer,a.fn.drawer.noConflict=function(){return a.fn.drawer=b,this}}(this.jQuery||this.Zepto,this,this.document);