/**
 *
 * Drawer 2.0.0
 *
 * A simple off canvas navigation built with JavaScript & CSS3. It's library agnostic, provides support for jQuery and AMD and it's simple to set up and use.
 *
 * Website: http://drawerjs.rolandjitsu.com/
 * Repository: https://github.com/rolandjitsu/drawerjs.git
 * Bugs: https://github.com/rolandjitsu/drawerjs/issues
 *
 * Copyright (c) 2013 Rolandjitsu
 * License MIT: https://github.com/rolandjitsu/drawerjs/blob/master/LICENSE.md 
 *
 */


(function(a,b,c){var d="Drawer",e="2.0.0",f={content:"#drawer-content",offset:120,navigation:"#drawer-navigation",speed:250},g=function(){this.prefixes="O ms Moz Webkit".split(" "),this.prototypes={},this.prototypes.arr=Array.prototype,this.prototypes.obj=Object.prototype,this.prototypes.fn=Function.prototype,this.slice=this.prototypes.arr.slice};g.prototype={bind:function(a,b){if(this.isFunction(a)){var c,d,e,f;return this.prototypes.fn.bind&&a.bind===this.prototypes.fn.bind?this.prototypes.fn.bind.apply(a,this.slice.call(arguments,1)):(f=this.slice,c=this.slice.call(arguments,2),e=function(){},d=function(){if(!(this instanceof d))return a.apply(b,c.concat(f.call(arguments)));e.prototype=a.prototype;var g=new e,h=a.apply(g,c.concat(f.call(arguments)));return e.prototype=null,Object(h)===h?h:g})}},boundings:function(a){return a.getBoundingClientRect()},contains:function(a,b){return!!~a.indexOf(b)},defaults:function(a){return this.each(this.slice.call(arguments,1),function(b){this.each(b,function(c,d){this.isUndefined(a[d])&&(a[d]=b[d])},this)},this),a},each:function(a,b,c){var d,e=this.isArray(a);if(e)for(d=a.length-1;d>=0&&b.apply(c,[a[d],d])!==!1;)d--;else{var f,g=this.keys(a);for(d=g.length-1;d>=0&&(f=g[d],b.apply(c,[a[f],f])!==!1);)d--}},has:function(a,b){return this.prototypes.obj.hasOwnProperty.call(a,b)},hyphen:function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")},is:function(a,b){return typeof a===b},isArray:Array.isArray||function(a){return a instanceof Array},isElement:function(a){return this.isObject(a)?HTMLElement instanceof Object?a instanceof HTMLElement:1===a.nodeType:!1},isEmpty:function(a){return 0===this.size(a)},isFunction:function(a){return this.is(a,"function")},isNode:function(a){return this.isObject(a)?Node instanceof Object?a instanceof Node:this.is(a.nodeType,"number"):!1},isNull:function(a){return null===a},isObject:function(a){return null!==a&&this.is(a,"object")&&!this.is(a,"function")},isString:function(a){return this.is(a,"string")||a instanceof String},isUndefined:function(a){return void 0===a},keys:Object.keys||function(a){if(this.isObject(a)){var b,c=[];for(b in a)this.has(a,b)&&c.push(b);return c}},prefixed:function(a,b){if(this.supports(a,b))return a;var d,e=this.prefixes.length-1;for(a=a.charAt(0).toUpperCase()+a.slice(1);e>=0;){if(d=this.prefixes[e]+a,this.supports(d,b))return d;e--}return c},random:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},select:function(a){return b.getElementById(/^(?:#([\w-]+))$/.exec(a)[1])},size:function(a){return this.isNull(a)?0:this.isArray(a)||this.isString(a)?a.length:this.keys(a).length},supports:function(c,d){var e;return e="CSS"in a&&"supports"in a.CSS?a.CSS.supports(this.hyphen(c),d):!this.isUndefined(b.createElement("drawer").style[c]),e?!0:!1}};var h=function(){this.supports={},this.supports.pointers=a.navigator.msPointerEnabled,this.supports.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch,this.raf=this.requestAnimationFrame(),this.caf=this.cancelAnimationFrame()};h.prototype={nativeAnimationFrameMethods:function(){for(var b,c,d,e="o ms moz webkit ".split(" "),f=e.length-1;f>=0&&(b=e[f],d=a[b+"CancelAnimationFrame"]||a[b+"CancelRequestAnimationFrame"],c=a[b+"RequestAnimationFrame"],"function"!=typeof c);)f--;return{cancel:d,request:c}}(),cancelAnimationFrame:function(){return k.isFunction(this.nativeAnimationFrameMethods.cancel)?k.bind(this.nativeAnimationFrameMethods.cancel,a):function(a){clearTimeout(a)}},requestAnimationFrame:function(){var b=0;return k.isFunction(this.nativeAnimationFrameMethods.request)?k.bind(this.nativeAnimationFrameMethods.request,a):function(c,d){var e=Date.now(),f=Math.max(0,16-(e-b)),g=a.setTimeout(function(){c(e+f,d)},f);return b=e+f,g}}};var i=function(){var a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};this.properties={},this.properties.transition={},this.properties.transform={},this.properties.flexbox={},this.properties.flexbox.type={},this.properties.transition.property=k.prefixed("transition","opacity 2s ease"),this.properties.transition.end=a[this.properties.transition.property],this.properties.transform.js=k.prefixed("transform","scale(1)"),this.properties.transform.css=k.hyphen(this.properties.transform.js),this.properties.perspective=k.prefixed("perspective","1000"),this.properties.backface=k.prefixed("backfaceVisibility","hidden"),this.properties.touchAction=k.prefixed("touchAction","none"),this.properties.flexbox.type.edge=k.prefixed("flexBasis","1px"),this.properties.flexbox.type.legacy=k.prefixed("boxDirection","reverse"),this.properties.flexbox.type.hybrid=k.prefixed("flexAlign","end"),this.properties.flexbox.type.edge&&(this.properties.flexbox.display=k.hyphen(k.prefixed("flex","1"))),this.properties.flexbox.type.hybrid&&(this.properties.flexbox.display="-ms-flexbox"),this.properties.flexbox.type.legacy&&k.isUndefined(this.properties.flexbox.type.edge)&&(this.properties.flexbox.display=k.hyphen(k.prefixed("boxDirection","reverse")).replace("-direction","")),this.properties.flexbox.length=this.properties.flexbox.type.edge?k.prefixed("flex","1"):k.prefixed("boxFlex","1")};i.prototype={animate:function(a,b,c,d,e){if(k.isUndefined(this.properties.transition.property))return this.pollyfil(a,b,c,d,e);var f=this.properties.transition,g=function(b){b.target===a&&(a.style[f.property]="",a.removeEventListener(f.end,g),k.isFunction(d)&&d.call(),k.isFunction(e)&&e.call())};a.addEventListener(f.end,g,!1),a.style[f.property]=this.properties.transform.css+" "+c+"ms",this.translate(a,b)},pollyfil:function(a,b,c,d,e){var f,g=k.boundings(a).left,h=b-g,i=Date.now(),j=k.bind(function(m){var n=m-i;n>=c?(this.translate(a,b),l.caf(f),k.isFunction(d)&&d.call(),k.isFunction(e)&&e.call()):(this.translate(a,g+n/c*h),f=l.raf(j))},this);l.raf(j)},translate:function(a,b){a.style[this.properties.transform.js]="translate("+b+"px, 0)"+(this.properties.perspective?"translateZ(0)":"")}};var j={offload:function(a){setTimeout(a||function(){},0)},handleEvent:function(a){var b=a.type,c={start:/touchstart|MSPointerDown/,move:/touchmove|MSPointerMove/,end:/touchend|MSPointerUp/,resize:/orientationchange|resize/};c.start.test(b)&&this.start(a),c.move.test(b)&&this.move(a),c.end.test(b)&&this.offload(this.end(a)),c.resize.test(b)&&this.offload(this.reset(a))},start:function(a){this.index&&a.preventDefault();var b=l.supports.touch?a.touches[0]:{pageX:a.pageX,pageY:a.pageY};l.supports.pointers&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&this.pointers.push(a.pointerId),this.started.x=b.pageX,this.started.y=b.pageY,this.started.time=l.supports.pointers?a.timeStamp:Date.now(),k.isEmpty(this.delta)||(this.delta={}),this.scrolling=c,this.content.addEventListener(l.supports.touch?"touchmove":"MSPointerMove",this,!1),this.content.addEventListener(l.supports.touch?"touchend":"MSPointerUp",this,!1)},move:function(a){var b=a.scale,c=l.supports.touch?a.touches:l.supports.pointers&&a.pointerType===a.MSPOINTER_TYPE_TOUCH?this.pointers:[];if(!(c.length>1||b&&1!==b)){var d=l.supports.touch?c[0]:{pageX:a.pageX,pageY:a.pageY};this.delta.x=d.pageX-this.started.x,this.delta.y=d.pageY-this.started.y,k.isUndefined(this.scrolling)&&(this.scrolling=Math.abs(this.delta.x)<Math.abs(this.delta.y)),this.scrolling||(a.preventDefault(),this.delta.x<0&&!this.index||this.delta.x>0&&this.index||m.translate(this.content,this.index?this.viewport.width-Math.abs(this.delta.x)-this.options.offset:this.delta.x))}},end:function(a){if(!this.scrolling){var b=this.delta.x<0,c=this.viewport.width/2,d=Math.abs(this.delta.x),e=Date.now()-this.started.time<250&&d>20||d>c,f=k.boundings(this.content).left>c;e&&!b&&(!f||!this.index)||!e&&!k.isEmpty(this.delta)&&b&&f?this.open():this.close(),l.supports.pointers&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&(this.pointers=[]),this.content.removeEventListener(l.supports.touch?"touchmove":"MSPointerMove",this,!1),this.content.removeEventListener(l.supports.touch?"touchend":"MSPointerUp",this,!1)}},open:function(){var a=k.isFunction(this.options.onOpen)&&!this.index;a&&this.options.onOpen.call(),m.animate(this.content,this.viewport.width-this.options.offset,this.options.speed,a?this.options.onOpened:c,this.options.transitioned),this.index=1},close:function(){var a=k.isFunction(this.options.onClose)&&this.index;a&&this.options.onClose.call(),m.animate(this.content,0,this.options.speed,a?this.options.onClosed:c,this.options.transitioned),this.index=0},reset:function(){this.viewport.width=a.document.documentElement.clientWidth,this.navigation.style.width=this.viewport.width-this.options.offset+"px",this.index&&this.close()}},k=new g,l=new h,m=new i,n=function(b,c){return this.events.options=k.defaults(k.isObject(c)?c:{},f),this.events.element=k.isElement(b)?b:k.select(b),this.events.content=k.isElement(this.events.options.content)?this.events.options.content:k.select(this.events.options.content),this.events.navigation=k.isElement(this.events.options.navigation)?this.events.options.navigation:k.select(this.events.options.navigation),k.isElement(this.events.element)&&k.isElement(this.events.content)&&k.isElement(this.events.navigation)?(this.events.element.style.display=m.properties.flexbox.display,this.events.element.style.overflowX="hidden",this.events.element.style[m.properties.backface]="hidden",this.events.element.style[m.properties.perspective]="1000",this.events.content.style[m.properties.flexbox.length]="1",this.events.content.style[m.properties.touchAction]="none",this.events.content.style.zIndex=k.random(10,1e3),this.events.navigation.style.position="absolute",this.events.navigation.style.width=a.document.documentElement.clientWidth-this.events.options.offset+"px",a.addEventListener("onorientationchange"in a?"orientationchange":"resize",this.events,!1),(l.supports.touch||l.supports.pointers)&&this.events.content.addEventListener(l.supports.touch?"touchstart":"MSPointerDown",this.events,!1),{close:k.bind(this.events.close,this.events),content:this.events.content,element:this.events.element,navigation:this.events.navigation,open:k.bind(this.events.open,this.events),options:this.events.options,version:e}):void 0};n.prototype={constructor:n,events:Object.create(j,{delta:{value:{},writable:!0},index:{value:0,writable:!0},started:{value:{},writable:!0},scrolling:{value:c,writable:!0},pointers:{enumerable:!0,value:[],writable:!0},viewport:{enumerable:!0,value:{width:a.document.documentElement.clientWidth,height:a.document.documentElement.clientHeight},writable:!0}})},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a[d]=n,define(function(){return n})):a[d]=n}).apply(this,[this,this.document]),function(a){var b=a.fn.drawer;a.fn.drawer=function(b){return this.each(function(){var c=a(this),d=c.data("drawer"),e=a.extend({},a.fn.drawer.defaults,c.data(),null!==b&&"object"==typeof b&&"function"!=typeof b?b:{});d||(d=new Drawer(this,e),c.data("drawer",d)),"string"==typeof b&&d[b]()})},a.fn.drawer.defaults={},a.fn.drawer.Constructor=Drawer,a.fn.drawer.noConflict=function(){return a.fn.drawer=b,this}}(this.jQuery||this.Zepto,this,this.document);